(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[237],{3307:function(e,t,a){"use strict";a.d(t,{Z:function(){return l}});var n=a(809),r=a.n(n),i=a(2447),c=a(4047),s=a(2700),o=a(696),l=function(){function e(){(0,c.Z)(this,e)}return(0,s.Z)(e,null,[{key:"getProducts",value:function(){var e=(0,i.Z)(r().mark((function e(t,a,n,i){var c,s,l,u,d=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=d.length>4&&void 0!==d[4]?d[4]:"",e.prev=1,s=n?"0":"",e.next=5,o.Z.get("products-list/?p=".concat(a,"&stock=").concat(s,"&search=").concat(c));case 5:l=e.sent,u=l.data,t(u),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(1),e.t0.response&&e.t0.response.data&&"P\xe1gina inv\xe1lida."===e.t0.response.data.detail&&1!==a&&i(1);case 13:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(t,a,n,r){return e.apply(this,arguments)}}()},{key:"deleteProduct",value:function(){var e=(0,i.Z)(r().mark((function e(t,a,n,i,c,s){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.Z.delete("product-admin/".concat(a,"/"));case 3:return this.getProducts(t,n,i,c,s),e.abrupt("return",!0);case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,this,[[0,7]])})));return function(t,a,n,r,i,c){return e.apply(this,arguments)}}()},{key:"createProduct",value:function(){var e=(0,i.Z)(r().mark((function e(t,a,n,i,c,s,l,u,d,p,m,h,x){var f;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.Z.post("product/",t,{headers:{"Content-Type":"multipart/form-data"}});case 3:return this.getProducts(a,n,i,c,x),s(!1),l(!1),u(!1),d(!1),p(!1),m(!1),h(!1),e.abrupt("return",!0);case 14:e.prev=14,e.t0=e.catch(0),(f=e.t0.response)&&f.data&&(f.data.name&&s(f.data.name),f.data.slug&&l(f.data.slug),f.data.price&&u(f.data.price),f.data.category&&d(f.data.category),f.data.stock&&p(f.data.stock),f.data.description&&m(f.data.description),f.data.image&&h(f.data.image));case 18:case"end":return e.stop()}}),e,this,[[0,14]])})));return function(t,a,n,r,i,c,s,o,l,u,d,p,m){return e.apply(this,arguments)}}()},{key:"retrieveProduct",value:function(){var e=(0,i.Z)(r().mark((function e(t,a){var n,i;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.Z.get("product/".concat(t,"/"));case 3:n=e.sent,i=n.data,a(i),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"updateProduct",value:function(){var e=(0,i.Z)(r().mark((function e(t,a,n,i,c,s,l,u,d,p,m,h,x,f){var j;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.Z.patch("product-admin/".concat(x,"/"),t,{headers:{"Content-Type":"multipart/form-data"}});case 3:return this.getProducts(a,n,i,c,f),s(!1),l(!1),u(!1),d(!1),p(!1),m(!1),h(!1),e.abrupt("return",!0);case 14:e.prev=14,e.t0=e.catch(0),(j=e.t0.response)&&j.data&&(j.data.name&&s(j.data.name),j.data.slug&&l(j.data.slug),j.data.price&&u(j.data.price),j.data.category&&d(j.data.category),j.data.stock&&p(j.data.stock),j.data.description&&m(j.data.description),j.data.image&&h(j.data.image));case 18:case"end":return e.stop()}}),e,this,[[0,14]])})));return function(t,a,n,r,i,c,s,o,l,u,d,p,m,h){return e.apply(this,arguments)}}()},{key:"listProducts",value:function(){var e=(0,i.Z)(r().mark((function e(t,a){var n,i,c,s,l,u,d,p,m,h,x,f,j,v=arguments;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=v.length>2&&void 0!==v[2]&&v[2],i=v.length>3&&void 0!==v[3]&&v[3],c=v.length>4&&void 0!==v[4]&&v[4],s=v.length>5&&void 0!==v[5]?v[5]:"-popularity",l=v.length>6&&void 0!==v[6]&&v[6],u=v.length>7&&void 0!==v[7]&&v[7],e.prev=6,d=c?"&search=".concat(c):"",p=n?"&maxPrice=".concat(n):"",m=i?"&minPrice=".concat(i):"",h=l?"&deal=True":"",x=u?"&category=".concat(u):"",e.next=14,o.Z.get("products/?p=".concat(a).concat(d).concat(p).concat(m).concat(h).concat(x,"&ordering=").concat(s));case 14:f=e.sent,j=f.data,t(j),e.next=21;break;case 19:e.prev=19,e.t0=e.catch(6);case 21:case"end":return e.stop()}}),e,null,[[6,19]])})));return function(t,a){return e.apply(this,arguments)}}()},{key:"increasePopularity",value:function(){var e=(0,i.Z)(r().mark((function e(t){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.Z.patch("pop/".concat(t,"/"));case 3:e.next=7;break;case 5:e.prev=5,e.t0=e.catch(0);case 7:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getTotal",value:function(){var e=(0,i.Z)(r().mark((function e(t){var a,n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.Z.get("total/");case 3:a=e.sent,n=a.data,t(n),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getPopular",value:function(){var e=(0,i.Z)(r().mark((function e(t){var a,n;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.Z.get("popular-products/");case 3:a=e.sent,n=a.data,t(n),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()}]),e}()},9027:function(e,t,a){"use strict";var n=a(5893),r=(a(7294),a(1770));t.Z=function(e){var t=e.children,a=e.SetForm;return(0,n.jsx)(r.E.div,{initial:{scale:.3,opacity:0},exit:{scale:.3,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.25},className:"popop-container",onClick:function(e){if(e.target.classList.contains("popop-container")){var t=document.querySelector("body");t&&(t.style.overflowY="auto"),e.target.classList.add("transition"),e.target.style.opacity=0,setTimeout((function(){a(!1)}),600)}},children:(0,n.jsx)("div",{className:"popop",children:t})})}},6587:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return P}});var n=a(5893),r=a(7294),i=a(5113),c=a(809),s=a.n(c),o=a(2447),l=a(3307),u=a(1770),d=a(7516),p=a(8193),m=a(1872),h=a(6455),x=a.n(h),f=a(9027),j=a(1163),v=a(1097),g=a(9352),y=function(e){var t=e.SetProducts,a=e.SetForm,i=e.page,c=e.SetPage,s=e.stockFilter,o=e.search,d=(0,r.useState)(""),p=d[0],m=d[1],h=(0,r.useState)(""),f=h[0],j=h[1],y=(0,r.useState)(""),N=y[0],b=y[1],S=(0,r.useState)(""),C=S[0],k=S[1],E=(0,r.useState)(""),P=E[0],w=E[1],F=(0,r.useState)(""),Z=F[0],D=F[1],T=(0,r.useState)(!1),_=T[0],L=T[1],Y=(0,r.useState)(!1),B=Y[0],q=Y[1],R=(0,r.useState)(!1),U=R[0],A=R[1],I=(0,r.useState)(!1),z=I[0],H=I[1],M=(0,r.useState)(!1),J=M[0],O=M[1],V=(0,r.useState)(!1),W=V[0],X=V[1],G=(0,r.useState)(!1),K=G[0],Q=G[1],$=(0,r.useState)(!1),ee=$[0],te=$[1],ae=(0,r.useState)([]),ne=ae[0],re=ae[1];function ie(e,t){var a=e.target.parentElement;a.style.opacity=0,a.style.transform="translateY(-20px)",setTimeout((function(){t(!1)}),500)}return(0,r.useEffect)((function(){v.Z.getCategories(re)}),[]),(0,r.useEffect)((function(){ne.length>0&&k(ne[0].id)}),[ne]),(0,n.jsx)("div",{className:"mt container",children:(0,n.jsx)("div",{className:"container",children:(0,n.jsxs)("form",{onSubmit:function(e){e.preventDefault();var n=new FormData;n.append("name",p),n.append("slug",f),n.append("price",N),n.append("category",C),n.append("stock",P),n.append("description",Z),n.append("image",_),l.Z.createProduct(n,t,i,s,c,q,A,H,O,X,Q,te,o).then((function(e){if(e)x().fire("Producto Creado","El producto ha sido creado correctamente","success").then((function(){var e=document.querySelector("body");e&&(e.style.overflowY="auto"),a(!1)}));else{var t=document.querySelector(".popop");t&&t.scrollTo(0,0)}}))},className:"form",children:[B&&(0,n.jsx)(u.E.div,{initial:{opacity:0},exit:{opacity:0},animate:{opacity:1},children:(0,n.jsxs)("p",{className:"error transition",children:[B," ",(0,n.jsx)("span",{className:"x",onClick:function(e){return ie(e,q)},children:"x"})]})}),(0,n.jsxs)("div",{className:"form-control",children:[(0,n.jsx)("label",{htmlFor:"name",children:"Nombre"}),(0,n.jsx)("input",{value:p,type:"text",id:"name",placeholder:"Nombre",onChange:function(e){return m(e.target.value)}})]}),U&&(0,n.jsx)(u.E.div,{initial:{opacity:0},exit:{opacity:0},animate:{opacity:1},children:(0,n.jsxs)("p",{className:"error transition",children:[U," ",(0,n.jsx)("span",{className:"x",onClick:function(e){return ie(e,A)},children:"x"})]})}),(0,n.jsxs)("div",{className:"form-control",children:[(0,n.jsx)("label",{htmlFor:"slug",children:"URL"}),(0,n.jsx)("input",{value:f,type:"text",id:"slug",placeholder:"URL",onChange:function(e){return j(e.target.value)}})]}),z&&(0,n.jsx)(u.E.div,{initial:{opacity:0},exit:{opacity:0},animate:{opacity:1},children:(0,n.jsxs)("p",{className:"error transition",children:[z," ",(0,n.jsx)("span",{className:"x",onClick:function(e){return ie(e,H)},children:"x"})]})}),(0,n.jsxs)("div",{className:"form-control",children:[(0,n.jsx)("label",{htmlFor:"price",children:"Precio"}),(0,n.jsx)("input",{value:N,min:"0",type:"number",id:"price",placeholder:"Precio",onChange:function(e){return b(e.target.value)}})]}),W&&(0,n.jsx)(u.E.div,{initial:{opacity:0},exit:{opacity:0},animate:{opacity:1},children:(0,n.jsxs)("p",{className:"error transition",children:[W," ",(0,n.jsx)("span",{className:"x",onClick:function(e){return ie(e,X)},children:"x"})]})}),(0,n.jsxs)("div",{className:"form-control",children:[(0,n.jsx)("label",{htmlFor:"stock",children:"Stock"}),(0,n.jsx)("input",{value:P,type:"number",min:0,id:"stock",placeholder:"Stock",onChange:function(e){return w(e.target.value)}})]}),ee&&(0,n.jsx)(u.E.div,{initial:{opacity:0},exit:{opacity:0},animate:{opacity:1},children:(0,n.jsxs)("p",{className:"error transition",children:[ee," ",(0,n.jsx)("span",{className:"x",onClick:function(e){return ie(e,te)},children:"x"})]})}),(0,n.jsxs)("div",{className:"file-input",children:[(0,n.jsx)("h3",{children:"Im\xe1gen"}),(0,n.jsxs)("label",{htmlFor:"imagen",className:"align-svg",children:[(0,n.jsx)("span",{className:"txt",children:_?_.name:"Subir im\xe1gen del producto"}),(0,n.jsx)("span",{className:"svg",children:(0,n.jsx)(g.cJh,{})})]}),(0,n.jsx)("input",{onChange:function(e){return L(e.target.files[0])},type:"file",id:"imagen",accept:"image/png, image/jpeg, image/webp"})]}),K&&(0,n.jsx)(u.E.div,{initial:{opacity:0},exit:{opacity:0},animate:{opacity:1},children:(0,n.jsxs)("p",{className:"error transition",children:[K," ",(0,n.jsx)("span",{className:"x",onClick:function(e){return ie(e,Q)},children:"x"})]})}),(0,n.jsxs)("div",{className:"form-control",children:[(0,n.jsx)("label",{htmlFor:"description",children:"Descripci\xf3n"}),(0,n.jsx)("textarea",{value:Z,type:"text",id:"description",placeholder:"Descripci\xf3n",onChange:function(e){return D(e.target.value)}})]}),J&&(0,n.jsx)(u.E.div,{initial:{opacity:0},exit:{opacity:0},animate:{opacity:1},children:(0,n.jsxs)("p",{className:"error transition",children:[J," ",(0,n.jsx)("span",{className:"x",onClick:function(e){return ie(e,O)},children:"x"})]})}),(0,n.jsxs)("div",{className:"form-control",children:[(0,n.jsx)("label",{htmlFor:"categoria",children:"Categor\xeda"}),(0,n.jsx)("select",{id:"categoria",onChange:function(e){return k(e.target.value)},children:ne&&ne.map((function(e){return(0,n.jsx)("option",{value:e.id,children:e.name},e.id)}))})]}),(0,n.jsx)("button",{type:"submit",className:"btn btn-success mt",children:"Crear Producto"})]})})})},N=a(3990),b=function(e){var t=e.SetProducts,a=e.SetForm,i=e.page,c=e.SetPage,s=e.stockFilter,o=e.slugID,d=e.search,p=(0,r.useState)(""),m=p[0],h=p[1],f=(0,r.useState)(""),j=f[0],y=f[1],b=(0,r.useState)(""),S=b[0],C=b[1],k=(0,r.useState)(""),E=k[0],P=k[1],w=(0,r.useState)(""),F=w[0],Z=w[1],D=(0,r.useState)(""),T=D[0],_=D[1],L=(0,r.useState)(!1),Y=L[0],B=L[1],q=(0,r.useState)(!1),R=q[0],U=q[1],A=(0,r.useState)(""),I=A[0],z=A[1],H=(0,r.useState)(!1),M=H[0],J=H[1],O=(0,r.useState)(!1),V=O[0],W=O[1],X=(0,r.useState)(!1),G=X[0],K=X[1],Q=(0,r.useState)(!1),$=Q[0],ee=Q[1],te=(0,r.useState)(!1),ae=te[0],ne=te[1],re=(0,r.useState)(!1),ie=re[0],ce=re[1],se=(0,r.useState)(!1),oe=se[0],le=se[1],ue=(0,r.useState)(!1),de=ue[0],pe=(ue[1],(0,r.useState)([])),me=pe[0],he=pe[1],xe=(0,r.useState)({}),fe=xe[0],je=xe[1];function ve(e,t){var a=e.target.parentElement;a.style.opacity=0,a.style.transform="translateY(-20px)",setTimeout((function(){t(!1)}),500)}return(0,r.useEffect)((function(){v.Z.getCategories(he),l.Z.retrieveProduct(o,je)}),[]),(0,r.useEffect)((function(){fe.category&&(h(fe.name),y(fe.slug),C(fe.price),P(fe.category.id),Z(fe.stock),_(fe.description),U(fe.deal),z(fe.special_price?fe.special_price:fe.price-1))}),[fe]),(0,n.jsx)("div",{className:"mt container",children:(0,n.jsx)("div",{className:"container",children:(0,n.jsxs)("form",{onSubmit:function(e){e.preventDefault();var n=new FormData;n.append("name",m),n.append("slug",j),n.append("price",S),n.append("category",E),n.append("stock",F),n.append("description",T),n.append("deal",R),n.append("special_price",""===I?null:I),Y&&n.append("image",Y),l.Z.updateProduct(n,t,i,s,c,J,W,K,ee,ne,ce,le,o,d).then((function(e){if(e)x().fire("Producto Actualizado","El producto ha sido actualizado correctamente","success").then((function(){var e=document.querySelector("body");e&&(e.style.overflowY="auto"),a(!1)}));else{var t=document.querySelector(".popop");t&&t.scrollTo(0,0)}}))},className:"form",children:[M&&(0,n.jsx)(u.E.div,{initial:{opacity:0},exit:{opacity:0},animate:{opacity:1},children:(0,n.jsxs)("p",{className:"error transition",children:[M," ",(0,n.jsx)("span",{className:"x",onClick:function(e){return ve(e,J)},children:"x"})]})}),(0,n.jsxs)("div",{className:"form-control",children:[(0,n.jsx)("label",{htmlFor:"name",children:"Nombre"}),(0,n.jsx)("input",{value:m,type:"text",id:"name",placeholder:"Nombre",onChange:function(e){return h(e.target.value)}})]}),V&&(0,n.jsx)(u.E.div,{initial:{opacity:0},exit:{opacity:0},animate:{opacity:1},children:(0,n.jsxs)("p",{className:"error transition",children:[V," ",(0,n.jsx)("span",{className:"x",onClick:function(e){return ve(e,W)},children:"x"})]})}),(0,n.jsxs)("div",{className:"form-control",children:[(0,n.jsx)("label",{htmlFor:"slug",children:"URL"}),(0,n.jsx)("input",{value:j,type:"text",id:"slug",placeholder:"URL",onChange:function(e){return y(e.target.value)}})]}),G&&(0,n.jsx)(u.E.div,{initial:{opacity:0},exit:{opacity:0},animate:{opacity:1},children:(0,n.jsxs)("p",{className:"error transition",children:[G," ",(0,n.jsx)("span",{className:"x",onClick:function(e){return ve(e,K)},children:"x"})]})}),(0,n.jsxs)("div",{className:"form-control",children:[(0,n.jsx)("label",{htmlFor:"price",children:"Precio"}),(0,n.jsx)("input",{value:S,min:"0",type:"number",id:"price",placeholder:"Precio",onChange:function(e){return C(e.target.value)}})]}),ae&&(0,n.jsx)(u.E.div,{initial:{opacity:0},exit:{opacity:0},animate:{opacity:1},children:(0,n.jsxs)("p",{className:"error transition",children:[ae," ",(0,n.jsx)("span",{className:"x",onClick:function(e){return ve(e,ne)},children:"x"})]})}),(0,n.jsxs)("div",{className:"form-control",children:[(0,n.jsx)("label",{htmlFor:"stock",children:"Stock"}),(0,n.jsx)("input",{value:F,type:"number",min:0,id:"stock",placeholder:"Stock",onChange:function(e){return Z(e.target.value)}})]}),(0,n.jsx)("div",{className:"img-thumbnail-for-update",children:(0,n.jsx)("img",{src:fe.image,alt:"vista previa de al imagen"})}),oe&&(0,n.jsx)(u.E.div,{initial:{opacity:0},exit:{opacity:0},animate:{opacity:1},children:(0,n.jsxs)("p",{className:"error transition",children:[oe," ",(0,n.jsx)("span",{className:"x",onClick:function(e){return ve(e,le)},children:"x"})]})}),(0,n.jsxs)("div",{className:"file-input",children:[(0,n.jsx)("h3",{children:"Im\xe1gen"}),(0,n.jsxs)("label",{htmlFor:"imagen",className:"align-svg",children:[(0,n.jsx)("span",{className:"txt",children:Y?Y.name:"Subir im\xe1gen del producto"}),(0,n.jsx)("span",{className:"svg",children:(0,n.jsx)(g.cJh,{})})]}),(0,n.jsx)("input",{onChange:function(e){return B(e.target.files[0])},type:"file",id:"imagen",accept:"image/png, image/jpeg, image/webp"})]}),ie&&(0,n.jsx)(u.E.div,{initial:{opacity:0},exit:{opacity:0},animate:{opacity:1},children:(0,n.jsxs)("p",{className:"error transition",children:[ie," ",(0,n.jsx)("span",{className:"x",onClick:function(e){return ve(e,ce)},children:"x"})]})}),(0,n.jsxs)("div",{className:"form-control",children:[(0,n.jsx)("label",{htmlFor:"description",children:"Descripci\xf3n"}),(0,n.jsx)("textarea",{value:T,type:"text",id:"description",placeholder:"Descripci\xf3n",onChange:function(e){return _(e.target.value)}})]}),$&&(0,n.jsx)(u.E.div,{initial:{opacity:0},exit:{opacity:0},animate:{opacity:1},children:(0,n.jsxs)("p",{className:"error transition",children:[$," ",(0,n.jsx)("span",{className:"x",onClick:function(e){return ve(e,ee)},children:"x"})]})}),(0,n.jsxs)("div",{className:"form-control",children:[(0,n.jsx)("label",{htmlFor:"categoria",children:"Categor\xeda"}),(0,n.jsx)("select",{id:"categoria",onChange:function(e){return P(e.target.value)},children:me&&me.map((function(e){return(0,n.jsx)("option",{selected:e.id===E,value:e.id,children:e.name},e.id)}))})]}),(0,n.jsxs)("div",{className:"promotions-checkbox align-svg",onClick:function(){return U(!R)},children:[(0,n.jsx)("span",{className:"svg",children:R?(0,n.jsx)(N.iLT,{}):(0,n.jsx)(N.kEs,{})}),(0,n.jsx)("h3",{className:"label-for-checkbox txt",children:R?"Desactivar Promoci\xf3n":"Activar Promoci\xf3n"})]}),R&&(0,n.jsxs)(n.Fragment,{children:[de&&(0,n.jsx)(u.E.div,{initial:{opacity:0},exit:{opacity:0},animate:{opacity:1},children:(0,n.jsxs)("p",{className:"error transition",children:[de," ",(0,n.jsx)("span",{className:"x",onClick:function(e){return ve(e,K)},children:"x"})]})}),(0,n.jsxs)("div",{className:"form-control",children:[(0,n.jsx)("label",{htmlFor:"specialPrice",children:"Precio Especial"}),(0,n.jsx)("input",{value:I,min:"0",type:"number",id:"specialPrice",placeholder:"Precio Especial",onChange:function(e){return z(e.target.value)}})]})]}),(0,n.jsx)("button",{type:"submit",className:"btn btn-success mt",children:"Actualizar Producto"})]})})})},S=function(){var e=(0,r.useState)({}),t=e[0],a=e[1],i=(0,r.useState)(1),c=i[0],h=i[1],v=(0,r.useState)(!1),g=v[0],N=v[1],S=(0,r.useState)(""),C=S[0],k=S[1],E=(0,r.useState)(!1),P=E[0],w=E[1],F=(0,r.useState)(!1),Z=F[0],D=F[1],T=(0,r.useState)(""),_=T[0],L=T[1];(0,j.useRouter)();(0,r.useEffect)((function(){l.Z.getProducts(a,c,g,h,_)}),[c,g]);var Y=Math.ceil(t.count/30);function B(){return(B=(0,o.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),h(1),L(""),e.next=5,l.Z.getProducts(a,c,g,h,"");case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,n.jsxs)(u.E.div,{initial:{opacity:0,x:300},exit:{opacity:0,x:-300},animate:{opacity:1,x:0},transition:{duration:.4},children:[(0,n.jsx)("h2",{className:"admin-header",children:"Productos"}),(0,n.jsx)("button",{className:"btn btn-success create-btn",onClick:function(){var e=document.querySelector("body");e&&(e.style.overflowY="hidden"),D(!0)},children:"Crear Producto +"}),(0,n.jsx)("label",{htmlFor:"stock",id:"label-for-stock",children:"Mostrar Productos Agotados"}),(0,n.jsx)("input",{type:"checkbox",id:"stock",onChange:function(e){h(1),N(e.target.checked)}}),(0,n.jsxs)("form",{className:"search-bar-input admin-search-bar",onSubmit:function(e){e.preventDefault(),h(1),l.Z.getProducts(a,c,g,h,_)},children:[(0,n.jsx)("input",{value:_,type:"text",className:"search-bar",placeholder:"Buscar productos por nombre, descripci\xf3n o id",onChange:function(e){return L(e.target.value)}}),(0,n.jsx)("button",{children:(0,n.jsx)(p.RB5,{})})]}),(0,n.jsx)("button",{className:"btn btn-info",onClick:function(e){return B.apply(this,arguments)},children:"Resetear Busqueda"}),(0,n.jsxs)("div",{className:"table-container",children:[(0,n.jsxs)("table",{children:[(0,n.jsxs)("thead",{children:[(0,n.jsx)("th",{children:"ID"}),(0,n.jsx)("th",{children:"Nombre"}),(0,n.jsx)("th",{children:"Imagen"}),(0,n.jsx)("th",{children:"Categor\xeda"}),(0,n.jsx)("th",{children:"Stock"}),(0,n.jsx)("th",{children:"En Promoci\xf3n"}),(0,n.jsx)("th",{children:"Fecha de creaci\xf3n"}),(0,n.jsx)("th",{children:"Acciones"})]}),(0,n.jsx)("tbody",{children:t.results&&t.results.map((function(e){var t=new Date(e.created_at),r=String(t.getDate()).padStart(2,"0"),i=String(t.getMonth()+1).padStart(2,"0"),s=String(t.getFullYear());return(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:e.id}),(0,n.jsx)("td",{children:e.name}),(0,n.jsx)("td",{className:"image-td",children:(0,n.jsx)("img",{src:e.image,alt:"Vista previa del producto"})}),(0,n.jsx)("td",{children:e.category.name}),(0,n.jsx)("td",{children:e.stock}),(0,n.jsx)("td",{children:e.deal?(0,n.jsx)(m.pl0,{}):(0,n.jsx)(m.VuA,{})}),(0,n.jsx)("td",{children:"".concat(r,"-").concat(i,"-").concat(s)}),(0,n.jsxs)("td",{className:"actions",children:[(0,n.jsxs)("div",{className:"trash svg-action",onClick:function(){var t;t=e.slug,x().fire({title:"Est\xe1s seguro",text:"No se podran revertir los cambios",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, eliminar producto",cancelButtonText:"Cancelar"}).then((function(e){e.isConfirmed&&l.Z.deleteProduct(a,t,c,g,h,_).then((function(e){e?x().fire("Eliminado","El producto ha sido eliminada correctamente.","success"):x().fire("Error","Hubo un error mientras tratabamos de eliminar el producto, porfavor intenta de nuevo m\xe1s tarde","error")}))}))},children:[(0,n.jsx)(d.SW4,{}),(0,n.jsxs)("span",{className:"hover-tag",children:["Eliminar ",e.name]})]}),(0,n.jsxs)("div",{className:"edit svg-action",onClick:function(){var t=document.querySelector("body");t&&(t.style.overflowY="hidden"),k(e.slug),w(!0)},children:[(0,n.jsx)(d.Hlf,{}),(0,n.jsxs)("span",{className:"hover-tag",children:["Editar ",e.name]})]})]})]},e.id)}))})]}),(0,n.jsxs)("div",{className:"pagination",children:[t.previous&&(0,n.jsx)("p",{className:"pagination-element",onClick:function(){return h(c-1)},children:"<<"}),c-2>0&&(0,n.jsx)("p",{className:"pagination-element",onClick:function(){return h(c-2)},children:c-2}),c-1>0&&(0,n.jsx)("p",{className:"pagination-element",onClick:function(){return h(c-1)},children:c-1}),(0,n.jsx)("p",{className:"pagination-element selected-page",children:c}),c+1<=Y&&(0,n.jsx)("p",{className:"pagination-element",onClick:function(){return h(c+1)},children:c+1}),c+2<=Y&&(0,n.jsx)("p",{className:"pagination-element",onClick:function(){return h(c+2)},children:c+2}),t.next&&(0,n.jsx)("p",{className:"pagination-element",onClick:function(){return h(c+1)},children:">>"})]})]}),Z&&(0,n.jsx)(f.Z,{SetForm:D,children:(0,n.jsx)(y,{search:_,SetPage:h,SetForm:D,SetProducts:a,page:c,stockFilter:g})}),P&&(0,n.jsx)(f.Z,{SetForm:w,children:(0,n.jsx)(b,{search:_,SetPage:h,SetForm:w,SetProducts:a,page:c,stockFilter:g,slugID:C})})]})},C=function(e){var t=e.SetCategories,a=e.SetForm,i=(0,r.useState)(""),c=i[0],s=i[1],o=(0,r.useState)(""),l=o[0],d=o[1],p=(0,r.useState)(!1),m=p[0],h=p[1],f=(0,r.useState)(!1),j=f[0],g=f[1];function y(e,t){var a=e.target.parentElement;a.style.opacity=0,a.style.transform="translateY(-20px)",setTimeout((function(){t(!1)}),500)}return(0,n.jsx)("div",{className:"mt container",children:(0,n.jsx)("div",{className:"container",children:(0,n.jsxs)("form",{onSubmit:function(e){e.preventDefault(),v.Z.createCategory({name:c,slug:l},t,h,g).then((function(e){e&&x().fire("Categor\xeda Creada","La categor\xeda ha sido creada correctamente","success").then((function(){var e=document.querySelector("body");e&&(e.style.overflowY="auto"),a(!1)}))}))},className:"form",children:[m&&(0,n.jsx)(u.E.div,{initial:{opacity:0},exit:{opacity:0},animate:{opacity:1},children:(0,n.jsxs)("p",{className:"error transition",children:[m," ",(0,n.jsx)("span",{className:"x",onClick:function(e){return y(e,h)},children:"x"})]})}),(0,n.jsxs)("div",{className:"form-control",children:[(0,n.jsx)("label",{htmlFor:"name",children:"Nombre"}),(0,n.jsx)("input",{value:c,type:"text",id:"name",placeholder:"Nombre",onChange:function(e){return s(e.target.value)}})]}),j&&(0,n.jsx)(u.E.div,{initial:{opacity:0},exit:{opacity:0},animate:{opacity:1},children:(0,n.jsxs)("p",{className:"error transition",children:[j," ",(0,n.jsx)("span",{className:"x",onClick:function(e){return y(e,g)},children:"x"})]})}),(0,n.jsxs)("div",{className:"form-control",children:[(0,n.jsx)("label",{htmlFor:"slug",children:"URL"}),(0,n.jsx)("input",{value:l,type:"text",id:"slug",placeholder:"URL",onChange:function(e){return d(e.target.value)}})]}),(0,n.jsx)("button",{type:"submit",className:"btn btn-success mt",children:"Crear Categor\xeda"})]})})})},k=function(e){var t=e.SetCategories,a=e.SetForm,i=e.slugID,c=(0,r.useState)(""),s=c[0],o=c[1],l=(0,r.useState)(""),d=l[0],p=l[1],m=(0,r.useState)(!1),h=m[0],f=m[1],j=(0,r.useState)(!1),g=j[0],y=j[1],N=(0,r.useState)(!1),b=N[0],S=N[1];function C(e,t){var a=e.target.parentElement;a.style.opacity=0,a.style.transform="translateY(-20px)",setTimeout((function(){t(!1)}),500)}return(0,r.useEffect)((function(){i&&v.Z.retrieveCategory(i,S)}),[i]),(0,r.useEffect)((function(){b&&(o(b.name),p(b.slug))}),[b]),(0,n.jsx)("div",{className:"mt container",children:(0,n.jsx)("div",{className:"container",children:(0,n.jsxs)("form",{onSubmit:function(e){e.preventDefault(),v.Z.updateCategory({name:s,slug:d},i,t,f,y).then((function(e){e&&x().fire("Categor\xeda Actualizada","La categor\xeda ha sido actualizada correctamente","success").then((function(){var e=document.querySelector("body");e&&(e.style.overflowY="auto"),a(!1)}))}))},className:"form",children:[h&&(0,n.jsx)(u.E.div,{initial:{opacity:0},exit:{opacity:0},animate:{opacity:1},children:(0,n.jsxs)("p",{className:"error transition",children:[h," ",(0,n.jsx)("span",{className:"x",onClick:function(e){return C(e,f)},children:"x"})]})}),(0,n.jsxs)("div",{className:"form-control",children:[(0,n.jsx)("label",{htmlFor:"name",children:"Nombre"}),(0,n.jsx)("input",{value:s,type:"text",id:"name",placeholder:"Nombre",onChange:function(e){return o(e.target.value)}})]}),g&&(0,n.jsx)(u.E.div,{initial:{opacity:0},exit:{opacity:0},animate:{opacity:1},children:(0,n.jsxs)("p",{className:"error transition",children:[g," ",(0,n.jsx)("span",{className:"x",onClick:function(e){return C(e,y)},children:"x"})]})}),(0,n.jsxs)("div",{className:"form-control",children:[(0,n.jsx)("label",{htmlFor:"slug",children:"URL"}),(0,n.jsx)("input",{value:d,type:"text",id:"slug",placeholder:"URL",onChange:function(e){return p(e.target.value)}})]}),(0,n.jsx)("button",{type:"submit",className:"btn btn-success mt",children:"Actualizar Categor\xeda"})]})})})},E=function(){var e=(0,r.useState)([]),t=e[0],a=e[1],i=(0,r.useState)(!1),c=i[0],s=i[1],o=(0,r.useState)(!1),l=o[0],p=o[1],m=(0,r.useState)(""),h=m[0],j=m[1];return(0,r.useEffect)((function(){v.Z.getCategories(a)}),[]),(0,n.jsxs)(u.E.div,{initial:{opacity:0,x:300},exit:{opacity:0,x:-300},animate:{opacity:1,x:0},transition:{duration:.4},children:[(0,n.jsx)("h2",{className:"admin-header",children:"Categor\xedas"}),(0,n.jsx)("button",{className:"btn btn-success create-btn",onClick:function(){s(!0);var e=document.querySelector("body");e&&(e.style.overflowY="hidden")},children:"Crear Categor\xeda +"}),(0,n.jsx)("div",{className:"table-container",children:(0,n.jsxs)("table",{children:[(0,n.jsxs)("thead",{children:[(0,n.jsx)("th",{children:"ID"}),(0,n.jsx)("th",{children:"Nombre"}),(0,n.jsx)("th",{children:"URL"}),(0,n.jsx)("th",{children:"Fecha de creaci\xf3n"}),(0,n.jsx)("th",{children:"Acciones"})]}),(0,n.jsx)("tbody",{children:t.map((function(e){var t=new Date(e.created_at),r=String(t.getDate()).padStart(2,"0"),i=String(t.getMonth()+1).padStart(2,"0"),c=String(t.getFullYear());return(0,n.jsxs)("tr",{children:[(0,n.jsx)("td",{children:e.id}),(0,n.jsx)("td",{children:e.name}),(0,n.jsx)("td",{children:e.slug}),(0,n.jsx)("td",{children:"".concat(r,"-").concat(i,"-").concat(c)}),(0,n.jsxs)("td",{className:"actions",children:[(0,n.jsxs)("div",{className:"trash svg-action",onClick:function(){!function(e){x().fire({title:"Est\xe1s seguro",text:"No se podran revertir los cambios",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:"Si, eliminar categor\xeda",cancelButtonText:"Cancelar"}).then((function(t){t.isConfirmed&&v.Z.deleteCategory(a,e).then((function(e){e?x().fire("Eliminado","La categor\xeda ha sido eliminada correctamente.","success"):x().fire("Error","Hubo un error mientras tratabamos de eliminar la categor\xeda, porfavor intenta de nuevo m\xe1s tarde","error")}))}))}(e.slug)},children:[(0,n.jsx)(d.SW4,{}),(0,n.jsxs)("span",{className:"hover-tag",children:["Eliminar ",e.name]})]}),(0,n.jsxs)("div",{className:"edit svg-action",onClick:function(){var t=document.querySelector("body");t&&(t.style.overflowY="hidden"),j(e.slug),p(!0)},children:[(0,n.jsx)(d.Hlf,{}),(0,n.jsxs)("span",{className:"hover-tag",children:["Editar ",e.name]})]})]})]},e.id)}))})]})}),c&&(0,n.jsx)(f.Z,{SetForm:s,children:(0,n.jsx)(C,{SetForm:s,SetCategories:a})}),l&&(0,n.jsx)(f.Z,{SetForm:p,children:(0,n.jsx)(k,{SetForm:p,SetCategories:a,slugID:h})})]})},P=function(e){var t=e.user,a=e.SetUser,c=(0,r.useState)(!0),s=c[0],o=c[1];return(0,r.useEffect)((function(){i.Z.getUser(a)}),[]),t&&t.is_staff&&(0,n.jsxs)("div",{className:"mt container",children:[(0,n.jsxs)("div",{className:"tab-toggler",children:[(0,n.jsx)("span",{className:s?"tab tab-active":"tab",onClick:function(){return o(!0)},children:"Categor\xedas"}),(0,n.jsx)("span",{className:s?"tab":"tab tab-active",onClick:function(){return o(!1)},children:"Productos"})]}),s?(0,n.jsx)(E,{}):(0,n.jsx)(S,{})]})}},2140:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/administracion",function(){return a(6587)}])}},function(e){e.O(0,[937,609,994,874,455,774,888,179],(function(){return t=2140,e(e.s=t);var t}));var t=e.O();_N_E=t}]);