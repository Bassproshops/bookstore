(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[720],{4805:function(e,t,n){"use strict";n.d(t,{Z:function(){return l}});var r=n(809),a=n.n(r),s=n(2447),c=n(4047),i=n(2700),d=n(696),l=function(){function e(){(0,c.Z)(this,e)}return(0,i.Z)(e,null,[{key:"checkout",value:function(){var e=(0,s.Z)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.Z.post("checkout/",{id:t});case 3:return e.abrupt("return",!0);case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getUserOrders",value:function(){var e=(0,s.Z)(a().mark((function e(t){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.Z.get("user-orders/");case 3:n=e.sent,r=n.data,t(r),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"retrieveOrder",value:function(){var e=(0,s.Z)(a().mark((function e(t,n){var r,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.Z.get("order/".concat(t,"/"));case 3:r=e.sent,s=r.data,n(s),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}()},{key:"getAllOrders",value:function(){var e=(0,s.Z)(a().mark((function e(t,n,r,s,c){var i,l,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i="",c&&(i="Orden Recivida"),s&&(i="Orden Enviada"),r&&(i="Orden Entregada"),e.next=7,d.Z.get("admin-orders/?p=".concat(n,"&status=").concat(i));case 7:l=e.sent,o=l.data,t(o),e.next=14;break;case 12:e.prev=12,e.t0=e.catch(0);case 14:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,n,r,a,s){return e.apply(this,arguments)}}()},{key:"updateOrder",value:function(){var e=(0,s.Z)(a().mark((function e(t,n,r,s,c,i,l){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.Z.patch("order-admin/".concat(n,"/"),t);case 3:this.getAllOrders(r,s,c,i,l),e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(t,n,r,a,s,c,i){return e.apply(this,arguments)}}()},{key:"Factura",value:function(){var e=(0,s.Z)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.Z.post("factura/",t);case 3:return e.abrupt("return",!0);case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()}]),e}()},9027:function(e,t,n){"use strict";var r=n(5893),a=(n(7294),n(1770));t.Z=function(e){var t=e.children,n=e.SetForm;return(0,r.jsx)(a.E.div,{initial:{scale:.3,opacity:0},exit:{scale:.3,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.25},className:"popop-container",onClick:function(e){if(e.target.classList.contains("popop-container")){var t=document.querySelector("body");t&&(t.style.overflowY="auto"),e.target.classList.add("transition"),e.target.style.opacity=0,setTimeout((function(){n(!1)}),600)}},children:(0,r.jsx)("div",{className:"popop",children:t})})}},4759:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return v}});var r=n(5893),a=n(7294),s=n(6265),c=n(4805),i=n(1664),d=n(1770),l=n(9352),o=n(155),u=n(9027),p=n(1163),h=function(){var e=(0,a.useState)(""),t=e[0],n=e[1],h=(0,a.useState)(""),v=h[0],x=h[1],m=(0,a.useState)(""),f=m[0],j=m[1],g=(0,a.useState)(""),N=g[0],O=g[1],k=(0,a.useState)({}),b=k[0],y=k[1],E=(0,a.useState)({}),Z=E[0],w=E[1],C=(0,a.useState)(1),S=C[0],_=C[1];(0,a.useEffect)((function(){c.Z.getAllOrders(w,S,t,v,f)}),[S,t,v,f]);var F=1;Z&&(F=Math.ceil(Z.count/100));(0,p.useRouter)();return(0,r.jsxs)(d.E.div,{initial:{opacity:0,x:300},exit:{opacity:0,x:-300},animate:{opacity:1,x:0},transition:{duration:.4},children:[(0,r.jsx)("h2",{className:"admin-header",children:"Ordenes"}),(0,r.jsxs)("div",{className:"orderFilter",children:[(0,r.jsx)("label",{htmlFor:"res-order",id:"label-for-stock",children:"Ordenes Pendientes"}),(0,r.jsx)("input",{checked:f,type:"checkbox",id:"res-order",onChange:function(e){_(1),n(!1),x(!1),j(!f)}})]}),(0,r.jsxs)("div",{className:"orderFilter",children:[(0,r.jsx)("label",{htmlFor:"sen-order",id:"label-for-stock",children:"Ordenes Enviadas"}),(0,r.jsx)("input",{checked:v,type:"checkbox",name:"filter",id:"sen-order",onChange:function(e){_(1),x(!v),j(!1),n(!1)}})]}),(0,r.jsxs)("div",{className:"orderFilter",children:[(0,r.jsx)("label",{htmlFor:"del-order",id:"label-for-stock",children:"Ordenes Entregadas"}),(0,r.jsx)("input",{checked:t,type:"checkbox",name:"filter",id:"del-order",onChange:function(e){_(1),n(!t),x(!1),j(!1)}})]}),(0,r.jsxs)("div",{className:"table-container order-table",children:[(0,r.jsxs)("table",{children:[(0,r.jsxs)("thead",{children:[(0,r.jsx)("th",{children:"ID"}),(0,r.jsx)("th",{children:"Fecha"}),(0,r.jsx)("th",{children:"Direcci\xf3n"}),(0,r.jsx)("th",{children:"Detalles del Pedido"}),(0,r.jsx)("th",{children:"Status del Env\xedo"}),(0,r.jsx)("th",{children:"Cambiar Status de el Env\xedo"})]}),(0,r.jsx)("tbody",{children:Z.results&&Z.results.map((function(e){var n=new Date(e.created_at),a=String(n.getDate()).padStart(2,"0"),s=String(n.getMonth()+1).padStart(2,"0"),i=String(n.getFullYear());return(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{children:e.id}),(0,r.jsx)("td",{children:"".concat(a,"-").concat(s,"-").concat(i)}),(0,r.jsx)("td",{className:"direction",children:(0,r.jsx)("p",{children:e.direction})}),(0,r.jsx)("td",{children:(0,r.jsx)("p",{className:"order-details",onClick:function(){y(e),O(!0)},children:"Ver Detalles"})}),(0,r.jsx)("td",{children:(0,r.jsxs)("div",{className:"svg-action",children:["Orden Recivida"===e.status&&(0,r.jsx)("p",{className:"status-table res",children:"Orden Recibida"})||"Orden Enviada"===e.status&&(0,r.jsx)("p",{className:"status-table env",children:"Orden Enviada"})||"Orden Entregada"===e.status&&(0,r.jsx)("p",{className:"status-table ent",children:"Orden Entregada"}),(0,r.jsx)("span",{className:"hover-tag",children:("Orden Recivida"===e.status?"Procesando orden":"Orden Enviada"===e.status&&"Orden enviada")||"Orden Entregada"===e.status&&"Orden entregada"})]})}),(0,r.jsx)("td",{className:"actions",children:(0,r.jsxs)("div",{className:"order-actions",children:[(0,r.jsxs)("div",{className:"recepit svg-action",onClick:function(){c.Z.updateOrder({status:"Orden Recivida"},e.id,w,S,t,v,f)},children:[(0,r.jsx)(o.qNH,{}),(0,r.jsx)("span",{className:"hover-tag",children:"Orden Recibida"})]}),(0,r.jsxs)("div",{className:"sent svg-action",onClick:function(){c.Z.updateOrder({status:"Orden Enviada"},e.id,w,S,t,v,f)},children:[(0,r.jsx)(l.aK1,{}),(0,r.jsx)("span",{className:"hover-tag",children:"Orden Enviada"})]}),(0,r.jsxs)("div",{className:"delivered svg-action",onClick:function(){c.Z.updateOrder({status:"Orden Entregada"},e.id,w,S,t,v,f)},children:[(0,r.jsx)(l.JBp,{}),(0,r.jsx)("span",{className:"hover-tag",children:"Orden Entregada"})]})]})})]},e.id)}))})]}),(0,r.jsxs)("div",{className:"pagination",children:[Z.previous&&(0,r.jsx)("p",{className:"pagination-element",onClick:function(){return _(S-1)},children:"<<"}),S-2>0&&(0,r.jsx)("p",{className:"pagination-element",onClick:function(){return _(S-2)},children:S-2}),S-1>0&&(0,r.jsx)("p",{className:"pagination-element",onClick:function(){return _(S-1)},children:S-1}),(0,r.jsx)("p",{className:"pagination-element selected-page",children:S}),S+1<=F&&(0,r.jsx)("p",{className:"pagination-element",onClick:function(){return _(S+1)},children:S+1}),S+2<=F&&(0,r.jsx)("p",{className:"pagination-element",onClick:function(){return _(S+2)},children:S+2}),Z.next&&(0,r.jsx)("p",{className:"pagination-element",onClick:function(){return _(S+1)},children:">>"})]})]}),N&&(0,r.jsx)(u.Z,{SetForm:O,children:(0,r.jsxs)("div",{className:"container spearate order-details",children:[(0,r.jsxs)("h2",{className:"form-header order-header",children:["Orden #",b.id]}),(0,r.jsxs)("h2",{className:"form-header",children:["Nombre del Usuario: ",b.user.nombre]}),b.order_items&&b.order_items.map((function(e){return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(i.default,{href:"/producto/".concat(e.product.slug,"/"),children:(0,r.jsxs)("div",{className:"product-item",children:[(0,r.jsx)("div",{className:"product-item-img",children:(0,r.jsx)("img",(0,s.Z)({alt:"img-preview",src:"".concat(e.product.image)},"alt","Vista Previa del producto"))}),(0,r.jsxs)("div",{className:"product-item-content",children:[(0,r.jsx)("h3",{className:"product-header",children:e.product.name}),(0,r.jsxs)("p",{className:"price",children:["Cantidad: ",e.quantity," "]}),(0,r.jsxs)("p",{className:"price",children:["Total: $",e.total]})]})]})},e.product.id)})})),(0,r.jsx)("div",{className:"progress-bar svg-action",children:(0,r.jsxs)("div",{className:("Orden Recivida"===b.status?"progress recieved-p":"Orden Enviada"===b.status&&"progress sent-p")||"Orden Entregada"===b.status&&"progress delivered-p",children:[(0,r.jsx)("span",{className:"hover-tag",children:("Orden Recivida"===b.status?"Procesando orden":"Orden Enviada"===b.status&&"Orden enviada")||"Orden Entregada"===b.status&&"Orden entregada"}),(0,r.jsx)(l.omj,{className:"img-truck"})]})}),(0,r.jsxs)("p",{className:"total",children:["Total: $",b.total]})]})})]})},v=function(e){var t=e.user;return(0,r.jsx)(d.E.div,{className:"container separate",initial:{opacity:0},exit:{opacity:0},animate:{opacity:1},children:t.is_staff&&(0,r.jsx)(h,{})})}},4845:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/admin/ordenes",function(){return n(4759)}])}},function(e){e.O(0,[937,260,774,888,179],(function(){return t=4845,e(e.s=t);var t}));var t=e.O();_N_E=t}]);