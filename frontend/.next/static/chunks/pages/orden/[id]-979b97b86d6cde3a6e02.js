(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[850],{4805:function(e,t,r){"use strict";r.d(t,{Z:function(){return l}});var a=r(809),n=r.n(a),i=r(2447),c=r(4047),s=r(2700),o=r(696),l=function(){function e(){(0,c.Z)(this,e)}return(0,s.Z)(e,null,[{key:"checkout",value:function(){var e=(0,i.Z)(n().mark((function e(t){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.Z.post("checkout/",{id:t});case 3:return e.abrupt("return",!0);case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()},{key:"getUserOrders",value:function(){var e=(0,i.Z)(n().mark((function e(t){var r,a;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.Z.get("user-orders/");case 3:r=e.sent,a=r.data,t(a),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}()},{key:"retrieveOrder",value:function(){var e=(0,i.Z)(n().mark((function e(t,r){var a,i;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.Z.get("order/".concat(t,"/"));case 3:a=e.sent,i=a.data,r(i),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,r){return e.apply(this,arguments)}}()},{key:"getAllOrders",value:function(){var e=(0,i.Z)(n().mark((function e(t,r,a,i,c){var s,l,u;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,s="",c&&(s="Orden Recivida"),i&&(s="Orden Enviada"),a&&(s="Orden Entregada"),e.next=7,o.Z.get("admin-orders/?p=".concat(r,"&status=").concat(s));case 7:l=e.sent,u=l.data,t(u),e.next=14;break;case 12:e.prev=12,e.t0=e.catch(0);case 14:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t,r,a,n,i){return e.apply(this,arguments)}}()},{key:"updateOrder",value:function(){var e=(0,i.Z)(n().mark((function e(t,r,a,i,c,s,l){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.Z.patch("order-admin/".concat(r,"/"),t);case 3:this.getAllOrders(a,i,c,s,l),e.next=8;break;case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,this,[[0,6]])})));return function(t,r,a,n,i,c,s){return e.apply(this,arguments)}}()},{key:"Factura",value:function(){var e=(0,i.Z)(n().mark((function e(t){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.Z.post("factura/",t);case 3:return e.abrupt("return",!0);case 6:e.prev=6,e.t0=e.catch(0);case 8:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(t){return e.apply(this,arguments)}}()}]),e}()},9027:function(e,t,r){"use strict";var a=r(5893),n=(r(7294),r(1770));t.Z=function(e){var t=e.children,r=e.SetForm;return(0,a.jsx)(n.E.div,{initial:{scale:.3,opacity:0},exit:{scale:.3,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.25},className:"popop-container",onClick:function(e){if(e.target.classList.contains("popop-container")){var t=document.querySelector("body");t&&(t.style.overflowY="auto"),e.target.classList.add("transition"),e.target.style.opacity=0,setTimeout((function(){r(!1)}),600)}},children:(0,a.jsx)("div",{className:"popop",children:t})})}},5309:function(e,t,r){"use strict";r.r(t);var a=r(809),n=r.n(a),i=r(5893),c=r(2447),s=r(7294),o=r(1163),l=r(4805),u=r(1770),d=r(1664),p=r(8785),m=r(9352),x=r(9027),h=r(5113),f=r(3869),v=r(6455),j=r.n(v);t.default=function(e){var t=e.user,r=e.SetUser,a=(0,o.useRouter)().query.id,v=(0,s.useState)({}),y=v[0],N=v[1],b=(0,s.useState)(!1),g=b[0],k=b[1],E=(0,s.useState)(!0),S=E[0],C=E[1],w=(0,s.useState)(!1),O=w[0],Z=w[1],F=(0,s.useState)(!1),_=F[0],D=F[1],P=(0,s.useState)(!1),R=P[0],T=P[1],q=(0,s.useState)(!1),U=q[0],A=q[1],L=(0,s.useState)(!1),z=L[0],I=L[1],X=(0,s.useState)(!1),Y=X[0],$=X[1],B=(0,s.useState)(!1),H=B[0],M=B[1],G=(0,s.useState)(!1),J=G[0],K=G[1],Q=(0,s.useState)(!1),V=Q[0],W=Q[1],ee=(0,s.useState)(""),te=ee[0],re=ee[1],ae=(0,s.useState)(""),ne=ae[0],ie=ae[1],ce=(0,s.useState)(""),se=ce[0],oe=ce[1],le=(0,s.useState)(""),ue=le[0],de=le[1],pe=(0,s.useState)(""),me=pe[0],xe=pe[1],he=(0,s.useState)(""),fe=he[0],ve=he[1],je=(0,s.useState)(""),ye=je[0],Ne=je[1],be=(0,s.useState)(""),ge=be[0],ke=be[1],Ee=(0,s.useState)(""),Se=Ee[0],Ce=Ee[1],we=(0,s.useState)(!1),Oe=we[0],Ze=we[1];function Fe(e,t){var r=e.target.parentElement;r.style.opacity=0,r.style.transform="translateY(-20px)",setTimeout((function(){t(!1)}),500)}function _e(){return(_e=(0,c.Z)(n().mark((function e(i){var c,s;return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i.preventDefault(),Oe){e.next=15;break}if(Ze(!0),S){e.next=11;break}return c={estado:te,calle:ne,colonia:se,exterior_number:ue,interior_number:me,postalcode:fe},e.next=7,h.Z.updateUser(c,r,t,Z,D,T,A,I,$);case 7:if(e.sent){e.next=11;break}return Ze(!1),e.abrupt("return");case 11:""===Se.trim()?(W("Este campo no puede estar en blanco"),Ze(!1)):W(!1),""===ye.trim()?(K("Este campo no puede estar en blanco"),Ze(!1)):K(!1),""===ge.trim()?(M("Este campo no puede estar en blanco"),Ze(!1)):M(!1),""!==ge.trim()&&""!==ye.trim()&&""!==Se.trim()&&(Ze(!0),s={id:y.id,email:ge,nombre:ye,rfc:Se},l.Z.Factura(s).then((function(e){e?j().fire("Solicitud Enviada","La solicitud de la factura a sido enviada correctamente, la factura se te har\xe1 llegar por correo electr\xf3nico.","success").then((function(){l.Z.retrieveOrder(a,N),k(!1)})):(j().fire("Un Error Ocurri\xf3","Hubo un error al solicitar la factura, porfavor intental\xf3 m\xe1s tarde","error"),Ze(!1))})));case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return(0,s.useEffect)((function(){t&&(re(t.estado),ie(t.calle),oe(t.colonia),de(t.exterior_number),xe(t.interior_number),ve(t.postalcode),ke(t.email),Ne(t.nombre))}),[t]),(0,s.useEffect)((function(){l.Z.retrieveOrder(a,N)}),[a]),t.id===y.user?(0,i.jsxs)(u.E.div,{initial:{opacity:0},exit:{opacity:0},animate:{opacity:1},children:[(0,i.jsxs)("div",{className:"container spearate order-details",children:[(0,i.jsxs)("h2",{className:"form-header order-header",children:["Orden #",y.id]}),y.order_items&&y.order_items.map((function(e){return(0,i.jsx)(d.default,{href:"/producto/".concat(e.product.slug,"/"),children:(0,i.jsxs)("div",{className:"product-item",children:[(0,i.jsx)("div",{className:"product-item-img",children:e.product&&(0,i.jsx)("img",{alt:"img-preview",src:"".concat(p.v2).concat(e.product.image)})}),(0,i.jsxs)("div",{className:"product-item-content",children:[(0,i.jsx)("h3",{className:"product-header",children:e.product.name}),(0,i.jsxs)("p",{className:"price",children:["Cantidad: ",e.quantity," "]}),(0,i.jsxs)("p",{className:"price",children:["Total: $",e.total]})]})]})},e.product.id)})),(0,i.jsx)("div",{className:"progress-bar svg-action",children:(0,i.jsxs)("div",{className:("Orden Recivida"===y.status?"progress recieved-p":"Orden Enviada"===y.status&&"progress sent-p")||"Orden Entregada"===y.status&&"progress delivered-p",children:[(0,i.jsx)("span",{className:"hover-tag",children:("Orden Recivida"===y.status?"Procesando orden":"Orden Enviada"===y.status&&"Orden enviada")||"Orden Entregada"===y.status&&"Orden entregada"}),(0,i.jsx)(m.omj,{className:"img-truck"})]})}),(0,i.jsx)("div",{className:"factura-container",children:y.factura?(0,i.jsx)("p",{className:"btn  factura transparency",style:{cursor:"not-allowed"},children:"Factura Solicitada"}):(0,i.jsx)("p",{className:"btn  factura",onClick:function(){return k(!0)},children:"Solicitar Factura Aqu\xed"})}),(0,i.jsxs)("p",{className:"total",children:["Total: $",y.total]})]}),!y.factura&&g&&(0,i.jsxs)(x.Z,{SetForm:k,children:[(0,i.jsx)("h2",{className:"form-header",children:"Solicitar Factura"}),(0,i.jsx)("form",{onSubmit:function(e){return _e.apply(this,arguments)},className:"separate container",children:(0,i.jsxs)(u.E.div,{initial:{opacity:0,y:-300},exit:{opacity:0,y:-300},animate:{opacity:1,y:0},children:[H&&(0,i.jsx)(u.E.div,{initial:{opacity:0},exit:{opacity:0},animate:{opacity:1},children:(0,i.jsxs)("p",{className:"error transition",children:[H," ",(0,i.jsx)("span",{className:"x",onClick:function(e){return Fe(e,M)},children:"x"})]})}),(0,i.jsxs)("div",{className:"form-control",children:[(0,i.jsx)("label",{htmlFor:"name",children:"Email"}),(0,i.jsx)("input",{value:ge,type:"email",id:"name",placeholder:"Email",onChange:function(e){return ke(e.target.value)}})]}),J&&(0,i.jsx)(u.E.div,{initial:{opacity:0},exit:{opacity:0},animate:{opacity:1},children:(0,i.jsxs)("p",{className:"error transition",children:[J," ",(0,i.jsx)("span",{className:"x",onClick:function(e){return Fe(e,K)},children:"x"})]})}),(0,i.jsxs)("div",{className:"form-control",children:[(0,i.jsx)("label",{htmlFor:"name",children:"Nombre / Denominaci\xf3n Social"}),(0,i.jsx)("input",{value:ye,type:"text",id:"name",placeholder:"Nombre / Denominaci\xf3n Social",onChange:function(e){return Ne(e.target.value)}})]}),V&&(0,i.jsx)(u.E.div,{initial:{opacity:0},exit:{opacity:0},animate:{opacity:1},children:(0,i.jsxs)("p",{className:"error transition",children:[V," ",(0,i.jsx)("span",{className:"x",onClick:function(e){return Fe(e,W)},children:"x"})]})}),(0,i.jsxs)("div",{className:"form-control",children:[(0,i.jsx)("label",{htmlFor:"name",children:"RFC"}),(0,i.jsx)("input",{value:Se,type:"text",id:"name",placeholder:"RFC",onChange:function(e){return Ce(e.target.value)}})]}),(0,i.jsx)("h3",{className:"payment-header",children:"Direcci\xf3n"}),(0,i.jsxs)("div",{className:"selection-card",children:[(0,i.jsxs)("label",{htmlFor:"preDefined",children:["Direcci\xf3n - ",t.calle," | ",t.colonia,", #",t.exterior_number,"-",t.interior_number&&"#".concat(t.exterior_number)]}),(0,i.jsx)("input",{checked:S,onChange:function(e){return C(e.target.checked)},className:"radio-input",type:"radio",name:"direction",id:"preDefined"})]}),(0,i.jsxs)("div",{className:"selection-card",children:[(0,i.jsx)("label",{htmlFor:"customDir",children:"Seleccionar otra direcci\xf3n"}),(0,i.jsx)("input",{checked:!S,onChange:function(e){return C(!e.target.checked)},className:"radio-input",type:"radio",name:"direction",id:"customDir"})]}),!S&&(0,i.jsx)(f.M,{exitBeforeEnter:!0,children:(0,i.jsxs)(u.E.div,{initial:{opacity:0,y:-300},exit:{opacity:0,y:-300},animate:{opacity:1,y:0},children:[O&&(0,i.jsx)(u.E.div,{initial:{opacity:0},exit:{opacity:0},animate:{opacity:1},children:(0,i.jsxs)("p",{className:"error transition",children:[O," ",(0,i.jsx)("span",{className:"x",onClick:function(e){return Fe(e,Z)},children:"x"})]})}),(0,i.jsxs)("div",{className:"form-control",children:[(0,i.jsx)("label",{htmlFor:"estado",children:"Estado"}),(0,i.jsx)("select",{id:"estado",onChange:function(e){return re(e.target.value)},children:p.xx&&p.xx.map((function(e){return(0,i.jsx)("option",{selected:e===t.estado,value:e,children:e},e)}))})]}),_&&(0,i.jsx)(u.E.div,{initial:{opacity:0},exit:{opacity:0},animate:{opacity:1},children:(0,i.jsxs)("p",{className:"error transition",children:[_," ",(0,i.jsx)("span",{className:"x",onClick:function(e){return Fe(e,D)},children:"x"})]})}),(0,i.jsxs)("div",{className:"form-control",children:[(0,i.jsx)("label",{htmlFor:"calle",children:"Calle"}),(0,i.jsx)("input",{value:ne,type:"text",id:"calle",placeholder:"Calle",onChange:function(e){return ie(e.target.value)}})]}),R&&(0,i.jsx)(u.E.div,{initial:{opacity:0},exit:{opacity:0},animate:{opacity:1},children:(0,i.jsxs)("p",{className:"error transition",children:[R," ",(0,i.jsx)("span",{className:"x",onClick:function(e){return Fe(e,T)},children:"x"})]})}),(0,i.jsxs)("div",{className:"form-control",children:[(0,i.jsx)("label",{htmlFor:"colonia",children:"Colonia"}),(0,i.jsx)("input",{value:se,type:"text",id:"colonia",placeholder:"Colonia",onChange:function(e){return oe(e.target.value)}})]}),U&&(0,i.jsx)(u.E.div,{initial:{opacity:0},exit:{opacity:0},animate:{opacity:1},children:(0,i.jsxs)("p",{className:"error transition",children:[U," ",(0,i.jsx)("span",{className:"x",onClick:function(e){return Fe(e,A)},children:"x"})]})}),(0,i.jsxs)("div",{className:"form-control",children:[(0,i.jsx)("label",{htmlFor:"exterior",children:"N\xfamero Exterior"}),(0,i.jsx)("input",{value:ue,type:"number",min:1,id:"exterior",placeholder:"N\xfamero Exterior",onChange:function(e){return de(e.target.value)}})]}),z&&(0,i.jsx)(u.E.div,{initial:{opacity:0},exit:{opacity:0},animate:{opacity:1},children:(0,i.jsxs)("p",{className:"error transition",children:[z," ",(0,i.jsx)("span",{className:"x",onClick:function(e){return Fe(e,I)},children:"x"})]})}),(0,i.jsxs)("div",{className:"form-control",children:[(0,i.jsx)("label",{htmlFor:"interior",children:"N\xfamero Interior (opcional)"}),(0,i.jsx)("input",{value:me,type:"number",min:1,id:"interior",placeholder:"N\xfamero Interior",onChange:function(e){""===e.target.value?xe(null):xe(e.target.value)}})]}),Y&&(0,i.jsx)(u.E.div,{initial:{opacity:0},exit:{opacity:0},animate:{opacity:1},children:(0,i.jsxs)("p",{className:"error transition",children:[Y," ",(0,i.jsx)("span",{className:"x",onClick:function(e){return Fe(e,$)},children:"x"})]})}),(0,i.jsxs)("div",{className:"form-control",children:[(0,i.jsx)("label",{htmlFor:"zip",children:"C\xf3digo Postal"}),(0,i.jsx)("input",{value:fe,type:"number",min:1,id:"zip",placeholder:"C\xf3digo Postal",onChange:function(e){return ve(e.target.value)}})]})]})}),(0,i.jsx)("button",{type:"submit",className:"btn btn-success mt",style:{cursor:Oe?"not-allowed":"pointer"},disabled:Oe,children:Oe?(0,i.jsx)("div",{className:"loader"}):"Solicitar Factura"})]})})]}),(0,i.jsx)("p",{className:"order-contact-email",children:"\xbfProblemas con tu env\xedo? Contactanos a: asuntosmariareina@hotmail.com"})]}):null}},9005:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/orden/[id]",function(){return r(5309)}])}},function(e){e.O(0,[937,455,774,888,179],(function(){return t=9005,e(e.s=t);var t}));var t=e.O();_N_E=t}]);